@@include('header.htm')
@@include('blocks/navigation.htm')

<script>
    document.addEventListener("DOMContentLoaded", function() {
        var params = new URLSearchParams(window.location.search);
        var name = params.get('name');
        if (name) {
            document.title = decodeURIComponent(name) + " - Détails du Projet"; // Modifier le titre de la page
            var pageTitleElements = document.querySelectorAll('.page-title h2');
            pageTitleElements.forEach(function(element) {
                element.textContent = decodeURIComponent(name); // Modifier les titres visibles sur la page
            });
        }
    });
</script>
@@include('blocks/page-title.htm', {
"title": "Project Details",
"description": "Single details"
})

<script>
	document.addEventListener("DOMContentLoaded", function() {
		var params = new URLSearchParams(window.location.search);
		var centerId = params.get('id');
		var apiBaseUrl = window.location.hostname === 'localhost' ? 'http://localhost:3000' : 'https://www.ouieqare.com';
		console.log("Fetching details for center ID:", centerId);  // Debug: Vérifiez l'ID récupéré
	
		fetch(`${apiBaseUrl}/api/centres/${centerId}`)
			.then(response => {
				if (!response.ok) {
					console.error("Failed to fetch details:", response.statusText);
					throw new Error('Failed to fetch');
				}
				return response.json();
			})
			.then(data => {
				console.log("Data received:", data);  // Debug: Inspect the data
				document.getElementById('name').textContent = data.name;
				document.getElementById('phone').textContent = data.phone;
				document.getElementById('address').textContent = data.Rue + ', ' + data.Code_postal + ' ' + data.Ville;
				document.getElementById('description').textContent = data.Description; 

				var centreImage = document.getElementById('centreImage');
            if (data.URL_Image_Centre) {
                centreImage.src = data.URL_Image_Centre;
            }  else {
        centreImage.src = 'https://example.com/default-logo.png';  // Fournissez une image par défaut en cas de manque
    }
			})
			.catch(error => {
				console.error('Erreur lors du chargement des détails du centre:', error);
				document.getElementById('description').textContent = 'Description non disponible';  // Gestion d'erreur
			});
	});
	</script>
<section class="section case-study">
    <div class="container">
        <div class="columns">
        <div class="column lg-6 column md-8">
            <div class="case-content pl-4 mt-4 mt-lg-0">
                <h3 class="mb-3" id="name"></h3>
                <p id="phone"></p>                    
                <h3>Présentation du centre</h3>
				<p id="address"><i class="fas fa-map-marker-alt"></i></p>
				<p><i class="fas fa-phone"></i> 09.85.40.72.28</p> 
                <p id="description"></p>
            </div>
			<div class="col-md-4 ">
				<button class="btn btn-primary" onclick="window.open('https://tally.so/r/wvBMdQ', '_blank')">Prendre RDV</button>
			</div>
        </div>
		<div class="column lg-6">
            <div class="case-img">
                <img  alt="Centre Image" style="max-width: 300px; height: auto;" id="centreImage">
            </div>
        </div>
		


    </div>
</div>
</section>
@@include('blocks/footer.htm')